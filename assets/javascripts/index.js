document.addEventListener("DOMContentLoaded", function () {
  let currentSlideNumber = -1
  let previousSlideNumber = -2
  const sources = ['Illustration by Peter Crowther',
                  'Photo by Nat Taylor',
                  'Photo by Nat Taylor',
                  'Photo by Jeff Walls',
                  '',
                  '']
  setInterval(() => {
    if (currentSlideNumber < 5) {
      if (previousSlideNumber <= currentSlideNumber) {
        previousSlideNumber = currentSlideNumber;
        currentSlideNumber += 1;
      }
    } else {
      previousSlideNumber = -1
      currentSlideNumber = 0
    }
    document.querySelector('.header__image').style.backgroundImage = `url('/assets/images/slideshow-${currentSlideNumber}.jpg')`
    document.querySelector('.header__source').textContent = sources[currentSlideNumber]
  }, 4000);

  setCards();
  onCardClick();

  document.querySelector(".flip-card-map").addEventListener("click", (event) => {
    event.preventDefault();
    document.querySelector(".flip-card-map").classList.toggle('flip-card-click')
  })
});

const setCards = () => {
  const flipCards = Array.from(document.getElementsByClassName('flip-card'));
  flipCards.forEach(element => {
    element.classList.add('set-cards');
  });
}

const onCardClick = () => {
  const flipCards = Array.from(document.querySelectorAll('.flip-card'));
  flipCards.forEach(element => {
    element.addEventListener('click', (event) => {
      event.preventDefault();
      let clickedElement = element.firstElementChild.firstElementChild.firstElementChild
      element.classList.toggle('flip-card-click')
      clickedElement.style.backgroundColor = '#DB9E00'
    })
  });
}

const mapCardOnClick =() => {
  const mapFlipCards = Array.from(document.querySelectorAll('.flip-card-map'));
  mapFlipCards.forEach(element => {
    element.addEventListener('click', (event) => {
      event.preventDefault();
      element.classList.toggle('flip-card-click')
    })
  });
}

