document.addEventListener("DOMContentLoaded", function () {
  let currentSlideNumber = -1
  let previousSlideNumber = -2
  const sources = ['(© soupstock - stock.adobe.com)',
                  'Photo by Jeff Walls',
                  '(© ndoeljindoel - stock.adobe.com)',
                  'Photo by Nat Taylor',
                  'Photo by Nat Taylor',
                  'Illustration by Peter Crowther']
  setInterval(() => {
    if (currentSlideNumber < 5) {
      if (previousSlideNumber <= currentSlideNumber) {
        previousSlideNumber = currentSlideNumber;
        currentSlideNumber += 1;
      }
    } else {
      previousSlideNumber = -1
      currentSlideNumber = 0
    }
    document.querySelector('.header__image').style.backgroundImage = `url('/assets/images/slideshow-${currentSlideNumber}.jpg')`
    document.querySelector('.header__source').textContent = sources[currentSlideNumber]
  }, 4000);

  flipCards();

  document.querySelector(".sidebar__tab--front").addEventListener("click", (event) => {
    event.preventDefault();
    document.querySelector(".sidebar__front").style = "display: flex;"
    document.querySelector(".sidebar__back").style = "display: none;"
    document.querySelector(".sidebar__wrapper").classList.remove("sidebar-toggle")
  })

  document.querySelector(".sidebar__tab--back").addEventListener("click", (event) => {
    event.preventDefault();
    document.querySelector(".sidebar__front").style = "display: none;"
    document.querySelector(".sidebar__back").style = "display: unset;"
    document.querySelector(".sidebar__wrapper").classList.add("sidebar-toggle")
  })
});

const flipCards = () => {
  $('.card').on('click', (event) => {
    event.preventDefault()
    event.currentTarget.classList.toggle('flipped')
    let tab = event.currentTarget.children[0].children[0]
    tab.classList.toggle('hidden')
  });
}